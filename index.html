<!DOCTYPE html>
<html>
<head>
  <title>Manga Reader</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Manga Search</h1>
    <input type="text" id="search" placeholder="Search manga...">
    <button onclick="searchManga()">Search</button>
    <div id="results" class="manga-grid"></div>
  </div>

  <script>
    async function searchManga() {
      const query = document.getElementById("search").value;
      const response = await fetch(`/.netlify/functions/fetchMangaList?query=${query}`);
      const data = await response.json();

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = data.data.map(manga => {
        const title = manga.attributes.title.en || "No Title";
        const coverId = manga.relationships.find(r => r.type === "cover_art")?.attributes?.fileName;
        const coverUrl = coverId ? `https://uploads.mangadex.org/covers/${manga.id}/${coverId}.256.jpg` : 'no-cover.jpg';
        
        return `
          <div class="manga-card" onclick="location.href='details.html?id=${manga.id}'">
            <img src="${coverUrl}" alt="${title}">
            <h3>${title}</h3>
          </div>
        `;
      }).join("");
    }
  </script>
</body>
</html>
